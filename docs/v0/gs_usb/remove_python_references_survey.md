# “去外部实现引用”文字清理调研报告

> 目标：代码与文档中不再出现任何“外部语言/实现名称”相关描述（含脚本语言名称、具体脚本文件名、以及“某语言 SDK …”等）。
> 本报告仅列出需要修改的位置与建议替换措辞，**不做实际替换**（待你确认后再批量改）。

---

## 1. 修改范围建议

- **必须修改（代码/公开文档）**：`src/`、`examples/`、`docs/v0/gs_usb/`（与 GS-USB 直接相关）。
- **可选修改（全仓库其他模块）**：`src/robot/*`、`src/protocol/*`、`docs/v0/*` 内存在大量“官方参考实现”对比性描述。若你的要求是“全仓库都不要提”，需要扩大范围；若仅针对 `gs_usb`，可暂不动其他模块。

---

## 2. 需要修改的文件清单（GS-USB 相关）

### 2.1 代码：`src/can/gs_usb/mod.rs`

**命中类型**：注释/文档注释中大量 “完全对齐某外部实现… / 某外部流程…”。

**建议替换口径**（统一用词）：
- “对齐外部实现流程” → “对齐参考实现/既有实现/推荐启动流程/协议推荐流程”
- “外部流程：scan() -> …” → “推荐流程：scan_info/open -> set_bitrate -> start”
- “外部实现没有发送 HOST_FORMAT” → “默认实现不发送 HOST_FORMAT（兼容性策略见文档）”

**命中位置（摘要）**：`src/can/gs_usb/mod.rs`（多处，需逐段替换）

---

### 2.2 代码：`src/can/gs_usb/device.rs`

**命中类型**：注释里出现 “与外部实现一致/对齐外部 start() 方法/位定时表对齐外部脚本 …”

**建议替换口径**：
- “与外部实现一致” → “与参考实现一致/与协议推荐行为一致”
- “对齐外部脚本位定时表” → “使用推荐位定时表（sample point 87.5%）”

**命中位置（摘要）**：`src/can/gs_usb/device.rs`（多处，需逐段替换）

---

### 2.3 代码：`src/can/gs_usb/protocol.rs`

**命中类型**：注释中出现 “参考实现通常不发送…”

**建议替换口径**：
- “参考实现…” → “常见固件/默认实现… / 兼容性策略…”

**命中位置**：
- `src/can/gs_usb/protocol.rs`：`GS_USB_BREQ_HOST_FORMAT` 的注释段落

---

### 2.4 示例：`examples/gs_usb_direct_test.rs`

**命中类型**：文件头注释和运行输出文本大量强调 “完全对齐外部实现”。

**建议替换口径**：
- 把“外部实现/语言名称”相关文字改为：
  - “直接按 GS-USB 协议进行直连调试”
  - “用于对比/验证：位定时、启动序列、帧解析”

**命中位置（摘要）**：`examples/gs_usb_direct_test.rs`（多处）

---

## 3. 文档：`docs/v0/gs_usb/`（GS-USB 文档域内）

### 3.1 `detailed_gs_usb_startup_and_api_analysis.md`

**命中类型**：全文以 “对齐外部实现 / 根因分析” 为核心叙事。

**建议处理方式**：
- 若你希望保留“对比视角”但不提外部实现名称：可改成“对比参考实现/对比直连脚本 vs SDK 路径”。
- 若你希望彻底去掉对比叙事：可重写为“启动流程与失败根因分析（基于直连验证与协议约束）”，删除所有外部实现名称与文件名。

---

### 3.2 `gs_usb_architecture_and_api_review_report.md`

**命中类型**：多处出现 “对齐外部实现 / 外部参考实现” 等。

**建议替换口径**：
- 统一改为 “对齐参考实现/对齐推荐流程/对齐既有验证路径”。

---

### 3.3 `gs_usb_compatibility_strategy.md`

**命中类型**：出现 “参考实现通常不发送…”

**建议替换口径**：
- 改为 “默认实现/常见固件不要求…”

---

## 4. 全仓库（非 GS-USB）命中概览（是否需要处理？）

以下文件也包含“官方参考实现/对照实现 …”的描述（与 GS-USB 无关或弱相关）：

- `src/robot/state.rs`
- `src/protocol/feedback.rs`
- `docs/v0/protocol_comparison_report.md`
- `docs/v0/detailed_protocol_comparison.md`
- `docs/v0/robot_state_analysis.md`

**需要你确认范围**：
- 选项 A：仅清理 GS-USB 相关（`src/can/gs_usb/*` + `examples/gs_usb_direct_test.rs` + `docs/v0/gs_usb/*`）
- 选项 B：全仓库清理（上述所有命中都改掉）

---

## 5. 建议的执行顺序

1. 先定“范围”
2. 在代码里统一替换口径（避免同一概念多种说法）
3. 重写高密度文件（例如 `detailed_gs_usb_startup_and_api_analysis.md`）
4. 最后跑 `cargo check` 并更新 docs 索引

---

## 6. 执行结果（已完成）

- 已完成全仓库清理：不再出现外部语言/实现名称、也不再出现以外部语言命名的代码块标记。
- 已做全仓库关键词复核：0 命中。


